# 変更履歴

## [未リリース]

### 修正
- コンパイルエラーの解消
  - `DebugOverlay`クラスの参照を完全に削除
    - インポート文の削除
    - フィールド宣言の削除
    - インスタンス生成とUIへの追加の削除
  - `isPaused()`の呼び出しを`isPausedProperty().get()`に修正
    - `SolarSystemManager`のプロパティベースの実装に合わせて修正

### 技術的な詳細
1. **DebugOverlayの削除**
   - 未実装の`DebugOverlay`クラスへの参照が原因でコンパイルエラーが発生
   - クラスが実装されるまでの間、関連するコードを完全に削除
   - 存在しないクラスへの依存を完全に排除し、import/宣言/使用の全削除を網羅

2. **メソッド呼び出しの修正**
   - `isPaused()`メソッドが存在しないため、プロパティベースの実装に変更
   - `isPausedProperty().get()`を使用して一時停止状態を取得
   - JavaFXのプロパティ設計に即した変更により、データバインディングやUI連携が改善

### 影響範囲
- `MainFX.java`
  - UIコンポーネントの構成が変更
  - アニメーションループの条件判定が変更

### 今後の対応
- `DebugOverlay`の実装が必要な場合は、別途実装を検討
  - 再利用の可能性がある場合は、TODOコメントまたはGitの別ブランチに退避
- プロパティベースの実装に統一することで、UIの更新をより効率的に管理
- `update(long now)`メソッドの設計を見直し
  - `AnimationTimer`の引数`now`を活用する場合は、`SolarSystemManager.update(long)`に渡す形に修正を検討
- プロパティの動作確認
  - `isPausedProperty().get()`が正しく状態を反映しているか、ユニットテストまたは画面上での動作確認を実施

### 成果
- ビルド成功可能な状態に復帰
- JavaFXの設計思想（プロパティベース）に沿った変更
- コードの健全性と拡張性の向上

## 2025-06-19

- 火星（Mars）をplanet_data.jsonに追加したところ、アプリ実行時にウィンドウが立ち上がらずshellでフリーズする現象を確認。
- ログ上は「天体データを読み込みました: 3個の天体」「天体を追加しました: 太陽／地球／火星」と正常に出力されるが、その後ウィンドウが表示されず、プロセスが停止したままとなる。
- planet_data.jsonの火星データはmass, radius, semiMajorAxis, period等すべて妥当な値であり、異常値は見当たらない。
- 地球＋太陽のみの場合は正常動作するか、今後検証予定。
- 今後の方針：
    - 火星データを一時的に除外し、地球＋太陽のみでの動作確認
    - CelestialBodyやSolarSystemManagerの軌道計算・描画処理のデバッグ
    - 必要に応じてprintデバッグや例外監視を追加 